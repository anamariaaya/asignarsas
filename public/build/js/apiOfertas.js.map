{"version":3,"sources":["apiOfertas.js"],"names":["er","num","ofertas","document","querySelector","navCiudades","createElement","gridVacantes","idURL","window","location","search","split","tituloSpan","linkCiudad","infoOferta","infoVacante","infoVacante2","ciudadCargo","divIndex","formPostulacion","fieldset","postularCargo","identificacion","nombreCandidato","apellidoCandidato","edadCandidato","telefonoCandidato","emailCandidato","ciudadCandidato","estudiosCandidato","hdvCandidato","btnPostular","candidato","id","nombre","apellido","edad","telefono","email","ciudad","estudios","hdv","idOferta","fechaRec","initApi","consultaCiudades","consultaOfertas","currency","number","str","toString","replace","join","async","resultado","fetch","datos","json","mostrarCiudades","tituloCiudad","error","console","log","ciudades","mostrarCiudad","addEventListener","e","filtro","filter","toLowerCase","includes","target","value","length","firstChild","removeChild","forEach","iconoOferta","classList","add","nombreCiudad","textContent","divCiudad","appendChild","enlaceCiudad","href","ofertasIndex","mostrarOfertas","detalleVacante","postulacionVacante","slice","oferta","cargo","salario","imagen","divOferta","imagenOferta","src","alt","setAttribute","cargoParrafo","cargoSpan","salarioParrafo","ciudadParrafo","enlaceOferta","idCiudades","Set","map","idCiudad","sinVacantes","divSinOfertas","iconoAlerta","mensajeAlerta","mostrarOferta","buscarCargo","buscarSalario","salarioRange","parseInt","sort","a","b","nombreCargo","spanCargo","salarioOferta","linkOferta","horario","descripcion","correo","vencimiento","whatsapp","dataset","style","backgroundImage","spanCiudad","innerHTML","descripcionOferta","horarioOferta","emailOferta","whatsappOferta","linkWhatsapp","spanWhatsapp","vencimientoOferta","linkPostularse","find","leerPostulacion","validarCandidato","remove","mostrarError","type","test","files","disabled","llenarCandidato","mensaje","mensajeError","querySelectorAll","insertBefore","onclick","preventDefault","enviarCandidato","FormData","append","url","response","method","body","text","JSON","parse","Swal","fire","title","icon","then","reload"],"mappings":"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","file":"apiOfertas.js","sourcesContent":["//Variables para comprobación REGEX\r\nconst er = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\nconst num = /^[0-9]+$/;\r\n\r\n//Variables para ciudades\r\nconst ofertas= document.querySelector('#ciudades');\r\nconst navCiudades = document.createElement('NAV');\r\n\r\n//Variables para ofertas\r\nconst gridVacantes = document.querySelector('.grid-vacantes');\r\nconst idURL = window.location.search.split('=')[1];\r\nconst tituloSpan = document.querySelector('#ciudad-vacante');\r\nconst linkCiudad = document.querySelector('#link-ciudad');\r\nconst infoOferta = document.querySelector('.info-oferta');\r\nconst infoVacante = document.querySelector('#info-vacante');\r\nconst infoVacante2 = document.querySelector('#info-vacante2');\r\nconst ciudadCargo = document.querySelector('#ciudad-cargo');\r\nconst divIndex = document.querySelector('.grid-index-v');\r\n\r\n//Variables para el formulario de postulación\r\nconst formPostulacion = document.querySelector('#form-postulacion');\r\nconst fieldset = document.querySelector('#fieldset');\r\nconst postularCargo = document.querySelector('#postular-cargo');\r\nconst identificacion = document.querySelector('#identificacion');\r\nconst nombreCandidato = document.querySelector('#nombre-candidato');\r\nconst apellidoCandidato = document.querySelector('#apellido-candidato');\r\nconst edadCandidato = document.querySelector('#edad-candidato');\r\nconst telefonoCandidato = document.querySelector('#telefono-candidato');\r\nconst emailCandidato = document.querySelector('#email-candidato');\r\nconst ciudadCandidato = document.querySelector('#ciudad-candidato');\r\nconst estudiosCandidato = document.querySelector('#estudios-candidato');\r\nconst hdvCandidato = document.querySelector('#hdv');\r\nconst btnPostular = document.querySelector('#btn-postular');\r\nconst candidato = {\r\n    id: null,\r\n    identificacion: '',\r\n    nombre: '',\r\n    apellido: '',\r\n    edad: '',\r\n    telefono: '',\r\n    email: '',\r\n    ciudad: '',\r\n    estudios: '',\r\n    hdv: '',\r\n    idOferta: idURL,\r\n    fechaRec: null\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initApi();\r\n});\r\n\r\nfunction initApi() {    \r\n    consultaCiudades();    \r\n    consultaOfertas();\r\n}\r\n\r\n//Funciones globales\r\nfunction currency(number) {\r\n    var str = number.toString().split(\".\");\r\n    str[0] = str[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n    return \"$\" + str.join(\".\");\r\n};\r\n\r\n//Api Ofertas\r\nasync function consultaCiudades(){\r\n    try{\r\n        const resultado = await fetch('/api/ciudades');\r\n        const datos = await resultado.json();\r\n        mostrarCiudades(datos);\r\n        tituloCiudad(datos);\r\n\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nfunction mostrarCiudades(ciudades){\r\n    if(ofertas){\r\n        mostrarCiudad(ciudades);\r\n        const buscarCiudad = document.querySelector('#buscar-ciudad');\r\n        buscarCiudad.addEventListener('input', e => {\r\n            const filtro = ciudades.filter(ciudad => ciudad.nombre.toLowerCase().includes((e.target.value).toLowerCase()));\r\n            \r\n            if(e.target.value.length > 1){\r\n                mostrarCiudad(filtro);\r\n            }else{\r\n                mostrarCiudad(ciudades);\r\n            }\r\n        });      \r\n    }    \r\n}\r\n\r\nfunction mostrarCiudad(ciudades){\r\n    while(navCiudades.firstChild){\r\n        navCiudades.removeChild(navCiudades.firstChild);\r\n    }\r\n    ciudades.forEach(ciudad => {\r\n        const {id, nombre} = ciudad;\r\n        //DOM Scripting\r\n        //Generar el ícono\r\n        const iconoOferta = document.createElement('i');\r\n        iconoOferta.classList.add('fa', 'fa-solid', 'fa-briefcase', 'no-click');\r\n\r\n        //Generar el nombre de la ciudad\r\n        const nombreCiudad = document.createElement('P');\r\n        nombreCiudad.textContent = nombre;\r\n        nombreCiudad.classList.add('no-click');\r\n\r\n        //Generar el div de la ciudad\r\n        const divCiudad = document.createElement('DIV');\r\n        divCiudad.classList.add('iconos', 'ofertas-icon');\r\n\r\n        //Asignar el icono y el nombre a la ciudad\r\n        divCiudad.appendChild(iconoOferta);\r\n        divCiudad.appendChild(nombreCiudad);\r\n\r\n        //Generar el enlace a la oferta\r\n        const enlaceCiudad = document.createElement('A');\r\n        enlaceCiudad.appendChild(divCiudad);\r\n        enlaceCiudad.href = `/vacantes?id=${id}`;        \r\n        \r\n        navCiudades.appendChild(enlaceCiudad);\r\n        ofertas.appendChild(navCiudades);\r\n    });\r\n}\r\n\r\nfunction tituloCiudad(ciudades){\r\n    if(tituloSpan){\r\n        ciudades.forEach(ciudad => {\r\n            const {id, nombre} = ciudad;\r\n            if(id === idURL){\r\n                tituloSpan.textContent = nombre;\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nasync function consultaOfertas(){\r\n    try{\r\n        const resultado = await fetch('/api/vacantes');\r\n        const datos = await resultado.json();\r\n        ofertasIndex(datos);\r\n        mostrarOfertas(datos);\r\n        detalleVacante(datos);\r\n        postulacionVacante(datos);\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\n//DOM Scripting - Ofertas Index\r\nfunction ofertasIndex(ofertas){\r\n    if(divIndex){\r\n        ofertas.slice(ofertas.length - 4, ofertas.length).forEach(oferta => {\r\n            const{id, cargo, salario, imagen, ciudad} = oferta;\r\n            \r\n            //Generar el div de la oferta\r\n            const divOferta = document.createElement('DIV');\r\n            divOferta.classList.add('vacante', 'vacante-index');\r\n\r\n            //Generar la imagen de la oferta\r\n            const imagenOferta = document.createElement('IMG');\r\n            imagenOferta.src = `/images/${imagen}`;\r\n            imagenOferta.alt = `Vacante en: ${ciudad}`;\r\n            imagenOferta.setAttribute('loading', 'lazy');\r\n            \r\n            //Generar el parrafo del cargo\r\n            const cargoParrafo = document.createElement('P');\r\n            //Generar el span del cargo\r\n            const cargoSpan = document.createElement('SPAN');\r\n            cargoSpan.textContent = cargo;\r\n            cargoParrafo.appendChild(cargoSpan);\r\n\r\n            //Generar el párrafo del salario\r\n            const salarioParrafo = document.createElement('P');\r\n            salarioParrafo.textContent = currency(salario);\r\n\r\n            //Generar el párrafo de la ciudad\r\n            const ciudadParrafo = document.createElement('P');\r\n            ciudadParrafo.textContent = `Ubicación: ${ciudad}`;\r\n\r\n            //Generar el enlace a la oferta\r\n            const enlaceOferta = document.createElement('A');\r\n            enlaceOferta.classList.add('btn-vacante');\r\n            enlaceOferta.textContent = 'Ver oferta';\r\n            enlaceOferta.href = `/vacante?id=${id}`;\r\n\r\n            //Asignar los elementos al div de la oferta\r\n            divOferta.appendChild(imagenOferta);\r\n            divOferta.appendChild(cargoParrafo);\r\n            divOferta.appendChild(salarioParrafo);\r\n            divOferta.appendChild(ciudadParrafo);\r\n            divOferta.appendChild(enlaceOferta);\r\n\r\n            //Asignar el div de la oferta al div de las ofertas\r\n            divIndex.appendChild(divOferta);\r\n        });\r\n    }\r\n}\r\n\r\n//DOM Scripting Ofertas y vacantes\r\nfunction mostrarOfertas(ofertas){\r\n    if(gridVacantes){\r\n        //hacer un arreglo con todas las idciudad de las ofertas sin repetir\r\n        const idCiudades = [...new Set(ofertas.map(oferta => oferta.idCiudad))];\r\n        \r\n        //Verificar si el idURL no es igual a alguna de las idCiudades para mostrar una alerta   \r\n        if(idURL){\r\n            if(!idCiudades.includes(idURL)){\r\n                const sinVacantes = document.querySelector('.sin-vacantes');\r\n\r\n                const divSinOfertas = document.createElement('DIV');\r\n                divSinOfertas.classList.add('sin-ofertas');\r\n                \r\n                const iconoAlerta = document.createElement('i');\r\n                iconoAlerta.classList.add('fa', 'fa-solid', 'fa-warning');\r\n\r\n                const mensajeAlerta = document.createElement('P');\r\n                mensajeAlerta.textContent = 'En este momento no hay vacantes en esta ciudad. Revisa más adelante.';\r\n\r\n                divSinOfertas.appendChild(iconoAlerta);\r\n                divSinOfertas.appendChild(mensajeAlerta);\r\n\r\n                sinVacantes.appendChild(divSinOfertas);\r\n            }\r\n        }\r\n        mostrarOferta(ofertas);\r\n\r\n        const buscarCargo = document.querySelector('#buscar-cargo');\r\n        const buscarSalario = document.querySelector('#buscar-salario');\r\n\r\n        buscarSalario.addEventListener('change', () => {            \r\n            const salarioRange = parseInt(buscarSalario.value);\r\n           //filtrar ofertas por salario minimo\r\n            const ofertasFiltradas = ofertas.filter(oferta => oferta.salario >= salarioRange);\r\n\r\n            //ordenar las ofertas filtradas de menor a mayor salario\r\n            const ofertasOrdenadas = ofertasFiltradas.sort((a, b) => a.salario - b.salario);\r\n\r\n           //mostrar las ofertas filtradas de menor a mayor\r\n            mostrarOferta(ofertasOrdenadas);\r\n\r\n        });\r\n        \r\n        buscarCargo.addEventListener('input', e => {\r\n            const cargo = ofertas.filter(oferta => oferta.cargo.toLowerCase().includes(e.target.value.toLowerCase()));\r\n\r\n            if(e.target.value.length > 1){\r\n                mostrarOferta(cargo);\r\n            }else{\r\n                mostrarOferta(ofertas);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction mostrarOferta(ofertas){\r\n    while(gridVacantes.firstChild){\r\n        gridVacantes.removeChild(gridVacantes.firstChild);\r\n    }\r\n\r\n    //DOM Scripting para mostrar las ofertas\r\n    ofertas.forEach(oferta => {\r\n        const{id, cargo, salario, idCiudad, imagen, ciudad} = oferta; \r\n\r\n        if(idURL === idCiudad){\r\n            tituloSpan.textContent = ciudad;\r\n            //Generar la imagen de la oferta\r\n            const imagenOferta = document.createElement('IMG');\r\n            imagenOferta.src = `/images/${imagen}`;\r\n            imagenOferta.setAttribute('alt', `Vacante de ${cargo}`);\r\n            imagenOferta.setAttribute('loading', 'lazy');\r\n\r\n            //Generar el nombre del cargo\r\n            const nombreCargo = document.createElement('P');\r\n            const spanCargo = document.createElement('SPAN');\r\n            spanCargo.textContent = cargo;\r\n\r\n            //Añadir el Span al P\r\n            nombreCargo.appendChild(spanCargo);\r\n\r\n            //Generar el salario\r\n            const salarioOferta = document.createElement('P');\r\n            salarioOferta.textContent = currency(salario);\r\n\r\n            //Link para ver la oferta\r\n            const linkOferta = document.createElement('A');\r\n            linkOferta.textContent = 'Ver oferta';\r\n            linkOferta.href = `/vacante?id=${id}`;\r\n            linkOferta.classList.add('btn-vacante');\r\n\r\n            //Generar el div de la oferta\r\n            const divOferta = document.createElement('DIV');\r\n            divOferta.classList.add('vacante');\r\n\r\n            //Añadir la imagen, el nombre del cargo, el salario y el link a la oferta\r\n            divOferta.appendChild(imagenOferta);\r\n            divOferta.appendChild(nombreCargo);\r\n            divOferta.appendChild(salarioOferta);\r\n            divOferta.appendChild(linkOferta);\r\n\r\n            //Añadir la oferta al grid\r\n            gridVacantes.appendChild(divOferta);            \r\n        }\r\n    });\r\n}\r\n\r\nfunction detalleVacante(ofertas){\r\n    if(infoVacante || infoVacante2){\r\n        ofertas.forEach(oferta => {\r\n            const {id, cargo, salario, horario, descripcion, correo, idCiudad, imagen, vencimiento, whatsapp, ciudad} = oferta;\r\n    \r\n            if(idURL === id){\r\n                if(linkCiudad){\r\n                    linkCiudad.href = `/vacantes?id=${idCiudad}`;\r\n                    linkCiudad.dataset.ciudad= idCiudad;\r\n              } \r\n    \r\n                //generar el título principal\r\n                const tituloPrincipal = document.querySelector('#oferta-actual');\r\n                tituloPrincipal.textContent = `Vacante: ${cargo}`;\r\n    \r\n                //Generar la imagen de fondo del div de la oferta\r\n                infoOferta.style.backgroundImage = `url(/images/${imagen})`;\r\n    \r\n                //**Elementos del div de la izquierda\r\n    \r\n                //Generar la imagen de la oferta\r\n                const imagenOferta = document.createElement('IMG');\r\n                imagenOferta.src = `/images/${imagen}`;\r\n                imagenOferta.setAttribute('alt', `Vacante de ${cargo}`);\r\n                imagenOferta.setAttribute('loading', 'lazy');      \r\n    \r\n                infoVacante.appendChild(imagenOferta);\r\n    \r\n                //**Elementos del Div de la derecha\r\n                \r\n                //Generar un titulo para la ciudad\r\n                const tituloCiudad = document.createElement('H3');\r\n                const spanCiudad = document.createElement('SPAN');\r\n                spanCiudad.textContent= `Ubicación: ${ciudad}`;\r\n                tituloCiudad.appendChild(spanCiudad);  \r\n    \r\n                //Generar el salario del cargo\r\n                const salarioOferta = document.createElement('P');\r\n                salarioOferta.innerHTML = '<span>Salario: </span>' + currency(salario);\r\n    \r\n                //Generar la descripción del cargo\r\n                const descripcionOferta = document.createElement('P');\r\n                descripcionOferta.innerHTML = '<span>Descripción: </span>' + descripcion;\r\n    \r\n                //Generar el horario del cargo\r\n                const horarioOferta = document.createElement('P');\r\n                horarioOferta.innerHTML = '<span>Horario: </span>' + horario;\r\n    \r\n                //Generar el correo del cargo\r\n                const emailOferta = document.createElement('P');\r\n                emailOferta.innerHTML = '<span>Email: </span>' + correo;\r\n    \r\n                //Generar el whatsapp del cargo\r\n                const whatsappOferta = document.createElement('P');\r\n                const linkWhatsapp = document.createElement('A');\r\n                linkWhatsapp.href = `https://wa.me/+57${whatsapp}`;\r\n                linkWhatsapp.setAttribute('target', '_blank');\r\n                const spanWhatsapp = document.createElement('SPAN');\r\n                spanWhatsapp.classList.add('whats');\r\n                spanWhatsapp.textContent = 'O escríbenos por WhatsApp dando click aquí';\r\n                linkWhatsapp.appendChild(spanWhatsapp);\r\n                whatsappOferta.appendChild(linkWhatsapp);\r\n    \r\n                //generar el vencimiento de la oferta\r\n                const vencimientoOferta = document.createElement('P');\r\n                vencimientoOferta.innerHTML = '<span>Esta vacante está disponible hasta el: </span>' + vencimiento;\r\n    \r\n                //Generar el link para postularse\r\n                const linkPostularse = document.createElement('A');\r\n                linkPostularse.textContent = 'Postularse';\r\n                linkPostularse.href = `/postulacion?id=${id}`;\r\n                linkPostularse.classList.add('btn-postularse');\r\n    \r\n                //Añadir los elementos al div de la oferta\r\n                infoVacante2.appendChild(tituloCiudad);\r\n                infoVacante2.appendChild(salarioOferta);\r\n                infoVacante2.appendChild(descripcionOferta);\r\n                infoVacante2.appendChild(horarioOferta);\r\n                infoVacante2.appendChild(emailOferta);\r\n                infoVacante2.appendChild(whatsappOferta);\r\n                infoVacante2.appendChild(vencimientoOferta);\r\n                infoVacante2.appendChild(linkPostularse);           \r\n            } \r\n       }); \r\n    }\r\n}\r\n\r\nfunction postulacionVacante(ofertas){\r\n    if(formPostulacion){\r\n        //Comprobar que el idURL exista en el arreglo de ofertas\r\n        const oferta = ofertas.find(oferta => oferta.id === idURL);\r\n        if(!oferta){\r\n            window.location.href = '/ofertas';\r\n        }\r\n\r\n        ofertas.forEach(oferta => {\r\n            const {id, cargo, ciudad} = oferta;\r\n    \r\n            if(idURL === id){\r\n                postularCargo.textContent = `Aplicar al cargo de ${cargo} en ${ciudad}`;\r\n            }\r\n            leerPostulacion();\r\n        });\r\n    }\r\n}\r\n\r\nfunction leerPostulacion(){\r\n    if(formPostulacion){\r\n        identificacion.addEventListener('blur', validarCandidato);\r\n        nombreCandidato.addEventListener('blur', validarCandidato);\r\n        apellidoCandidato.addEventListener('blur', validarCandidato);\r\n        edadCandidato.addEventListener('blur', validarCandidato);\r\n        telefonoCandidato.addEventListener('blur', validarCandidato);\r\n        emailCandidato.addEventListener('blur', validarCandidato);\r\n        ciudadCandidato.addEventListener('blur', validarCandidato);\r\n        estudiosCandidato.addEventListener('change', validarCandidato);\r\n        hdvCandidato.addEventListener('change', validarCandidato, false);\r\n    }\r\n}\r\n\r\nfunction validarCandidato(e){\r\n    if(e.target.value.length > 0){\r\n        //Elimina los errores\r\n        const error = document.querySelector('.alerta__error');\r\n        if(error){\r\n            error.remove();\r\n        }       \r\n    } else {\r\n        //console.log('No hay nada');\r\n        mostrarError('Todos los campos son obligatorios');\r\n    }\r\n\r\n    if(e.target.type === 'email'){\r\n        if(er.test(e.target.value) === false){\r\n            mostrarError('Email no valido');\r\n        } \r\n    }\r\n\r\n    if(e.target.type === 'tel'){\r\n        if(num.test(e.target.value) === false || e.target.value.length < 9){\r\n            mostrarError('Teléfono no valido');\r\n        } \r\n    }\r\n\r\n    if(e.target.type === 'number'){\r\n        if(num.test(e.target.value) === false || e.target.value < 18 || e.target.value > 99){\r\n            mostrarError('Edad no válida');\r\n        } \r\n    }\r\n\r\n    if(er.test(emailCandidato.value) && identificacion.value !== '' && nombreCandidato.value !== '' && apellidoCandidato.value !== '' && edadCandidato.value !== '' && ciudadCandidato.value !== '' && telefonoCandidato.value !== '' && hdvCandidato.files.length > 0){\r\n        btnPostular.disabled = false;\r\n        btnPostular.classList.remove('btn-disabled');\r\n        console.log('se puede enviar');\r\n        llenarCandidato();\r\n    }\r\n}\r\n\r\nfunction mostrarError(mensaje){\r\n    const mensajeError = document.createElement('p');\r\n    mensajeError.textContent = mensaje;\r\n    mensajeError.classList.add('alerta', 'alerta__error');\r\n\r\n    const errores = document.querySelectorAll('.alerta__error');\r\n    if(errores.length === 0){\r\n        formPostulacion.insertBefore(mensajeError, fieldset);\r\n    }    \r\n}\r\n\r\nfunction llenarCandidato(){\r\n    candidato.identificacion = identificacion.value;\r\n    candidato.nombre = nombreCandidato.value;\r\n    candidato.apellido = apellidoCandidato.value;\r\n    candidato.edad = edadCandidato.value;\r\n    candidato.telefono = telefonoCandidato.value;\r\n    candidato.email = emailCandidato.value;\r\n    candidato.ciudad = ciudadCandidato.value;\r\n    candidato.estudios = estudiosCandidato.value;\r\n    candidato.hdv = hdvCandidato.files[0];\r\n    \r\n    btnPostular.onclick= function(e){\r\n        e.preventDefault();\r\n        //Enviar el candidato a la BD\r\n        enviarCandidato();\r\n    }\r\n}\r\n\r\nasync function enviarCandidato(){\r\n    const {identificacion, nombre, apellido, edad, telefono, email, ciudad, estudios, hdv, idOferta} = candidato;\r\n    const datos = new FormData();\r\n\r\n    datos.append('identificacion', identificacion);\r\n    datos.append('nombre', nombre);\r\n    datos.append('apellido', apellido);\r\n    datos.append('edad', edad);\r\n    datos.append('telefono', telefono);\r\n    datos.append('email', email);\r\n    datos.append('ciudad', ciudad);\r\n    datos.append('estudios', estudios);\r\n    datos.append('hdv', hdv);\r\n    datos.append('idOferta', idOferta);\r\n\r\n    try{\r\n        const url = '/api/candidatos';\r\n\r\n        const response = await fetch(url, {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n\r\n        let resultado = await response.text();\r\n        resultado = JSON.parse(resultado);        \r\n\r\n        if(resultado.resultado){\r\n            Swal.fire({\r\n                title: 'Postulación Enviada',\r\n                text: 'Pronto te contactaremos',\r\n                icon: 'success'\r\n            }).then( () => {\r\n                window.location.reload();\r\n            })\r\n        };\r\n\r\n    } catch(error){\r\n        console.log(error);\r\n        Swal.fire({\r\n            title: 'Error',\r\n            text: 'Mensaje no enviado. Intenta de nuevo',\r\n            icon: 'error'\r\n        }).then( () => {\r\n            window.location.reload();\r\n        });   \r\n    }\r\n}"]}