{"version":3,"sources":["apiOfertas.js"],"names":["er","num","ofertas","document","querySelector","navCiudades","createElement","gridVacantes","idURL","window","location","search","split","tituloSpan","linkCiudad","infoOferta","infoVacante","infoVacante2","ciudadCargo","divIndex","formPostulacion","fieldset","postularCargo","identificacion","nombreCandidato","apellidoCandidato","edadCandidato","telefonoCandidato","emailCandidato","ciudadCandidato","hdvCandidato","btnPostular","candidato","id","nombre","apellido","edad","telefono","email","ciudad","hdv","idOferta","fechaRec","initApi","consultaCiudades","consultaOfertas","currency","number","str","toString","replace","join","async","resultado","fetch","datos","json","mostrarCiudades","tituloCiudad","error","console","log","ciudades","mostrarCiudad","addEventListener","e","filtro","filter","toLowerCase","includes","target","value","length","firstChild","removeChild","forEach","iconoOferta","classList","add","nombreCiudad","textContent","divCiudad","appendChild","enlaceCiudad","href","ofertasIndex","mostrarOfertas","detalleVacante","postulacionVacante","slice","oferta","cargo","salario","imagen","divOferta","imagenOferta","src","alt","setAttribute","cargoParrafo","cargoSpan","salarioParrafo","ciudadParrafo","enlaceOferta","idCiudades","Set","map","idCiudad","sinVacantes","divSinOfertas","iconoAlerta","mensajeAlerta","mostrarOferta","nombreCargo","spanCargo","salarioOferta","linkOferta","horario","descripcion","correo","vencimiento","whatsapp","dataset","style","backgroundImage","spanCiudad","innerHTML","descripcionOferta","horarioOferta","emailOferta","whatsappOferta","linkWhatsapp","spanWhatsapp","vencimientoOferta","linkPostularse","find","leerPostulacion","validarCandidato","remove","mostrarError","type","test","files","disabled","llenarCandidato","mensaje","mensajeError","querySelectorAll","insertBefore","onclick","preventDefault","enviarCandidato","FormData","append","url","response","method","body","text","Swal","fire","title","icon","then","reload"],"mappings":"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","file":"apiOfertas.js","sourcesContent":["//Variables para comprobación REGEX\r\nconst er = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\r\nconst num = /^[0-9]+$/;\r\n\r\n//Variables para ciudades\r\nconst ofertas= document.querySelector('#ciudades');\r\nconst navCiudades = document.createElement('NAV');\r\n\r\n//Variables para ofertas\r\nconst gridVacantes = document.querySelector('.grid-vacantes');\r\nconst idURL = window.location.search.split('=')[1];\r\nconst tituloSpan = document.querySelector('#ciudad-vacante');\r\nconst linkCiudad = document.querySelector('#link-ciudad');\r\nconst infoOferta = document.querySelector('.info-oferta');\r\nconst infoVacante = document.querySelector('#info-vacante');\r\nconst infoVacante2 = document.querySelector('#info-vacante2');\r\nconst ciudadCargo = document.querySelector('#ciudad-cargo');\r\nconst divIndex = document.querySelector('.grid-index-v');\r\n\r\n//Variables para el formulario de postulación\r\nconst formPostulacion = document.querySelector('#form-postulacion');\r\nconst fieldset = document.querySelector('#fieldset');\r\nconst postularCargo = document.querySelector('#postular-cargo');\r\nconst identificacion = document.querySelector('#identificacion');\r\nconst nombreCandidato = document.querySelector('#nombre-candidato');\r\nconst apellidoCandidato = document.querySelector('#apellido-candidato');\r\nconst edadCandidato = document.querySelector('#edad-candidato');\r\nconst telefonoCandidato = document.querySelector('#telefono-candidato');\r\nconst emailCandidato = document.querySelector('#email-candidato');\r\nconst ciudadCandidato = document.querySelector('#ciudad-candidato');\r\nconst hdvCandidato = document.querySelector('#hdv');\r\nconst btnPostular = document.querySelector('#btn-postular');\r\nconst candidato = {\r\n    id: null,\r\n    identificacion: '',\r\n    nombre: '',\r\n    apellido: '',\r\n    edad: '',\r\n    telefono: '',\r\n    email: '',\r\n    ciudad: '',\r\n    hdv: '',\r\n    idOferta: idURL,\r\n    fechaRec: null\r\n};\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initApi();\r\n});\r\n\r\nfunction initApi() {    \r\n    consultaCiudades();    \r\n    consultaOfertas();\r\n}\r\n\r\n//Funciones globales\r\nfunction currency(number) {\r\n    var str = number.toString().split(\".\");\r\n    str[0] = str[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n    return \"$\" + str.join(\".\");\r\n};\r\n\r\n//Api Ofertas\r\nasync function consultaCiudades(){\r\n    try{\r\n        const resultado = await fetch('http://localhost:3000/api/ciudades');\r\n        const datos = await resultado.json();\r\n        mostrarCiudades(datos);\r\n        tituloCiudad(datos);\r\n\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nfunction mostrarCiudades(ciudades){\r\n    if(ofertas){\r\n        mostrarCiudad(ciudades);\r\n        const buscarCiudad = document.querySelector('#buscar-ciudad');\r\n        buscarCiudad.addEventListener('input', e => {\r\n            const filtro = ciudades.filter(ciudad => ciudad.nombre.toLowerCase().includes((e.target.value).toLowerCase()));\r\n            \r\n            if(e.target.value.length > 1){\r\n                mostrarCiudad(filtro);\r\n            }else{\r\n                mostrarCiudad(ciudades);\r\n            }\r\n        });      \r\n    }    \r\n}\r\n\r\nfunction mostrarCiudad(ciudades){\r\n    while(navCiudades.firstChild){\r\n        navCiudades.removeChild(navCiudades.firstChild);\r\n    }\r\n    ciudades.forEach(ciudad => {\r\n        const {id, nombre} = ciudad;\r\n        //DOM Scripting\r\n        //Generar el ícono\r\n        const iconoOferta = document.createElement('i');\r\n        iconoOferta.classList.add('fa', 'fa-solid', 'fa-briefcase', 'no-click');\r\n\r\n        //Generar el nombre de la ciudad\r\n        const nombreCiudad = document.createElement('P');\r\n        nombreCiudad.textContent = nombre;\r\n        nombreCiudad.classList.add('no-click');\r\n\r\n        //Generar el div de la ciudad\r\n        const divCiudad = document.createElement('DIV');\r\n        divCiudad.classList.add('iconos', 'ofertas-icon');\r\n\r\n        //Asignar el icono y el nombre a la ciudad\r\n        divCiudad.appendChild(iconoOferta);\r\n        divCiudad.appendChild(nombreCiudad);\r\n\r\n        //Generar el enlace a la oferta\r\n        const enlaceCiudad = document.createElement('A');\r\n        enlaceCiudad.appendChild(divCiudad);\r\n        enlaceCiudad.href = `/vacantes?id=${id}`;        \r\n        \r\n        navCiudades.appendChild(enlaceCiudad);\r\n        ofertas.appendChild(navCiudades);\r\n    });\r\n}\r\n\r\nfunction tituloCiudad(ciudades){\r\n    if(tituloSpan){\r\n        ciudades.forEach(ciudad => {\r\n            const {id, nombre} = ciudad;\r\n            if(id === idURL){\r\n                tituloSpan.textContent = nombre;\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nasync function consultaOfertas(){\r\n    try{\r\n        const resultado = await fetch('http://localhost:3000/api/vacantes');\r\n        const datos = await resultado.json();\r\n        ofertasIndex(datos);\r\n        mostrarOfertas(datos);\r\n        detalleVacante(datos);\r\n        postulacionVacante(datos);\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\n//DOM Scripting - Ofertas Index\r\nfunction ofertasIndex(ofertas){\r\n    if(divIndex){\r\n        ofertas.slice(ofertas.length - 4, ofertas.length).forEach(oferta => {\r\n            const{id, cargo, salario, imagen, ciudad} = oferta;\r\n            \r\n            //Generar el div de la oferta\r\n            const divOferta = document.createElement('DIV');\r\n            divOferta.classList.add('vacante', 'vacante-index');\r\n\r\n            //Generar la imagen de la oferta\r\n            const imagenOferta = document.createElement('IMG');\r\n            imagenOferta.src = `/images/${imagen}`;\r\n            imagenOferta.alt = `Vacante en: ${ciudad}`;\r\n            imagenOferta.setAttribute('loading', 'lazy');\r\n            \r\n            //Generar el parrafo del cargo\r\n            const cargoParrafo = document.createElement('P');\r\n            //Generar el span del cargo\r\n            const cargoSpan = document.createElement('SPAN');\r\n            cargoSpan.textContent = cargo;\r\n            cargoParrafo.appendChild(cargoSpan);\r\n\r\n            //Generar el párrafo del salario\r\n            const salarioParrafo = document.createElement('P');\r\n            salarioParrafo.textContent = currency(salario);\r\n\r\n            //Generar el párrafo de la ciudad\r\n            const ciudadParrafo = document.createElement('P');\r\n            ciudadParrafo.textContent = `Ubicación: ${ciudad}`;\r\n\r\n            //Generar el enlace a la oferta\r\n            const enlaceOferta = document.createElement('A');\r\n            enlaceOferta.classList.add('btn-vacante');\r\n            enlaceOferta.textContent = 'Ver oferta';\r\n            enlaceOferta.href = `/vacante?id=${id}`;\r\n\r\n            //Asignar los elementos al div de la oferta\r\n            divOferta.appendChild(imagenOferta);\r\n            divOferta.appendChild(cargoParrafo);\r\n            divOferta.appendChild(salarioParrafo);\r\n            divOferta.appendChild(ciudadParrafo);\r\n            divOferta.appendChild(enlaceOferta);\r\n\r\n            //Asignar el div de la oferta al div de las ofertas\r\n            divIndex.appendChild(divOferta);\r\n        });\r\n    }\r\n}\r\n\r\n//DOM Scripting Ofertas y vacantes\r\nfunction mostrarOfertas(ofertas){\r\n    if(gridVacantes){\r\n        //hacer un arreglo con todas las idciudad de las ofertas sin repetir\r\n        const idCiudades = [...new Set(ofertas.map(oferta => oferta.idCiudad))];\r\n        \r\n        //Verificar si el idURL no es igual a alguna de las idCiudades para mostrar una alerta   \r\n        if(idURL){\r\n            if(!idCiudades.includes(idURL)){\r\n                const sinVacantes = document.querySelector('.sin-vacantes');\r\n\r\n                const divSinOfertas = document.createElement('DIV');\r\n                divSinOfertas.classList.add('sin-ofertas');\r\n                \r\n                const iconoAlerta = document.createElement('i');\r\n                iconoAlerta.classList.add('fa', 'fa-solid', 'fa-warning');\r\n\r\n                const mensajeAlerta = document.createElement('P');\r\n                mensajeAlerta.textContent = 'En este momento no hay vacantes en esta ciudad. Revisa más adelante.';\r\n\r\n                divSinOfertas.appendChild(iconoAlerta);\r\n                divSinOfertas.appendChild(mensajeAlerta);\r\n\r\n                sinVacantes.appendChild(divSinOfertas);\r\n            }\r\n        }\r\n        mostrarOferta(ofertas);\r\n        const buscarCargo = document.querySelector('#buscar-cargo');\r\n        buscarCargo.addEventListener('input', e => {\r\n            const cargo = ofertas.filter(oferta => oferta.cargo.toLowerCase().includes(e.target.value.toLowerCase()));\r\n\r\n            if(e.target.value.length > 1){\r\n                mostrarOferta(cargo);\r\n            }else{\r\n                mostrarOferta(ofertas);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction mostrarOferta(ofertas){\r\n    while(gridVacantes.firstChild){\r\n        gridVacantes.removeChild(gridVacantes.firstChild);\r\n    }\r\n\r\n    //DOM Scripting para mostrar las ofertas\r\n    ofertas.forEach(oferta => {\r\n        const{id, cargo, salario, idCiudad, imagen, ciudad} = oferta; \r\n\r\n        if(idURL === idCiudad){\r\n            tituloSpan.textContent = ciudad;\r\n            //Generar la imagen de la oferta\r\n            const imagenOferta = document.createElement('IMG');\r\n            imagenOferta.src = `/images/${imagen}`;\r\n            imagenOferta.setAttribute('alt', `Vacante de ${cargo}`);\r\n            imagenOferta.setAttribute('loading', 'lazy');\r\n\r\n            //Generar el nombre del cargo\r\n            const nombreCargo = document.createElement('P');\r\n            const spanCargo = document.createElement('SPAN');\r\n            spanCargo.textContent = cargo;\r\n\r\n            //Añadir el Span al P\r\n            nombreCargo.appendChild(spanCargo);\r\n\r\n            //Generar el salario\r\n            const salarioOferta = document.createElement('P');\r\n            salarioOferta.textContent = currency(salario);\r\n\r\n            //Link para ver la oferta\r\n            const linkOferta = document.createElement('A');\r\n            linkOferta.textContent = 'Ver oferta';\r\n            linkOferta.href = `/vacante?id=${id}`;\r\n            linkOferta.classList.add('btn-vacante');\r\n\r\n            //Generar el div de la oferta\r\n            const divOferta = document.createElement('DIV');\r\n            divOferta.classList.add('vacante');\r\n\r\n            //Añadir la imagen, el nombre del cargo, el salario y el link a la oferta\r\n            divOferta.appendChild(imagenOferta);\r\n            divOferta.appendChild(nombreCargo);\r\n            divOferta.appendChild(salarioOferta);\r\n            divOferta.appendChild(linkOferta);\r\n\r\n            //Añadir la oferta al grid\r\n            gridVacantes.appendChild(divOferta);            \r\n        }\r\n    });\r\n}\r\n\r\nfunction detalleVacante(ofertas){\r\n    if(infoVacante || infoVacante2){\r\n        ofertas.forEach(oferta => {\r\n            const {id, cargo, salario, horario, descripcion, correo, idCiudad, imagen, vencimiento, whatsapp, ciudad} = oferta;\r\n    \r\n            if(idURL === id){\r\n                if(linkCiudad){\r\n                    linkCiudad.href = `/vacantes?id=${idCiudad}`;\r\n                    linkCiudad.dataset.ciudad= idCiudad;\r\n              } \r\n    \r\n                //generar el título principal\r\n                const tituloPrincipal = document.querySelector('#oferta-actual');\r\n                tituloPrincipal.textContent = `Vacante: ${cargo}`;\r\n    \r\n                //Generar la imagen de fondo del div de la oferta\r\n                infoOferta.style.backgroundImage = `url(/images/${imagen})`;\r\n    \r\n                //**Elementos del div de la izquierda\r\n    \r\n                //Generar la imagen de la oferta\r\n                const imagenOferta = document.createElement('IMG');\r\n                imagenOferta.src = `/images/${imagen}`;\r\n                imagenOferta.setAttribute('alt', `Vacante de ${cargo}`);\r\n                imagenOferta.setAttribute('loading', 'lazy');      \r\n    \r\n                infoVacante.appendChild(imagenOferta);\r\n    \r\n                //**Elementos del Div de la derecha\r\n                \r\n                //Generar un titulo para la ciudad\r\n                const tituloCiudad = document.createElement('H3');\r\n                const spanCiudad = document.createElement('SPAN');\r\n                spanCiudad.textContent= `Ubicación: ${ciudad}`;\r\n                tituloCiudad.appendChild(spanCiudad);  \r\n    \r\n                //Generar el salario del cargo\r\n                const salarioOferta = document.createElement('P');\r\n                salarioOferta.innerHTML = '<span>Salario: </span>' + currency(salario);\r\n    \r\n                //Generar la descripción del cargo\r\n                const descripcionOferta = document.createElement('P');\r\n                descripcionOferta.innerHTML = '<span>Descripción: </span>' + descripcion;\r\n    \r\n                //Generar el horario del cargo\r\n                const horarioOferta = document.createElement('P');\r\n                horarioOferta.innerHTML = '<span>Horario: </span>' + horario;\r\n    \r\n                //Generar el correo del cargo\r\n                const emailOferta = document.createElement('P');\r\n                emailOferta.innerHTML = '<span>Email: </span>' + correo;\r\n    \r\n                //Generar el whatsapp del cargo\r\n                const whatsappOferta = document.createElement('P');\r\n                const linkWhatsapp = document.createElement('A');\r\n                linkWhatsapp.href = `https://wa.me/+57${whatsapp}`;\r\n                linkWhatsapp.setAttribute('target', '_blank');\r\n                const spanWhatsapp = document.createElement('SPAN');\r\n                spanWhatsapp.classList.add('whats');\r\n                spanWhatsapp.textContent = 'O escríbenos por WhatsApp dando click aquí';\r\n                linkWhatsapp.appendChild(spanWhatsapp);\r\n                whatsappOferta.appendChild(linkWhatsapp);\r\n    \r\n                //generar el vencimiento de la oferta\r\n                const vencimientoOferta = document.createElement('P');\r\n                vencimientoOferta.innerHTML = '<span>Esta vacante está disponible hasta el: </span>' + vencimiento;\r\n    \r\n                //Generar el link para postularse\r\n                const linkPostularse = document.createElement('A');\r\n                linkPostularse.textContent = 'Postularse';\r\n                linkPostularse.href = `/postulacion?id=${id}`;\r\n                linkPostularse.classList.add('btn-postularse');\r\n    \r\n                //Añadir los elementos al div de la oferta\r\n                infoVacante2.appendChild(tituloCiudad);\r\n                infoVacante2.appendChild(salarioOferta);\r\n                infoVacante2.appendChild(descripcionOferta);\r\n                infoVacante2.appendChild(horarioOferta);\r\n                infoVacante2.appendChild(emailOferta);\r\n                infoVacante2.appendChild(whatsappOferta);\r\n                infoVacante2.appendChild(vencimientoOferta);\r\n                infoVacante2.appendChild(linkPostularse);           \r\n            } \r\n       }); \r\n    }\r\n}\r\n\r\nfunction postulacionVacante(ofertas){\r\n    if(formPostulacion){\r\n        //Comprobar que el idURL exista en el arreglo de ofertas\r\n        const oferta = ofertas.find(oferta => oferta.id === idURL);\r\n        if(!oferta){\r\n            window.location.href = '/ofertas';\r\n        }\r\n\r\n        ofertas.forEach(oferta => {\r\n            const {id, cargo, ciudad} = oferta;\r\n    \r\n            if(idURL === id){\r\n                postularCargo.textContent = `Aplicar al cargo de ${cargo} en ${ciudad}`;\r\n            }\r\n            leerPostulacion();\r\n        });\r\n    }\r\n}\r\n\r\nfunction leerPostulacion(){\r\n    if(formPostulacion){\r\n        identificacion.addEventListener('blur', validarCandidato);\r\n        nombreCandidato.addEventListener('blur', validarCandidato);\r\n        apellidoCandidato.addEventListener('blur', validarCandidato);\r\n        edadCandidato.addEventListener('blur', validarCandidato);\r\n        telefonoCandidato.addEventListener('blur', validarCandidato);\r\n        emailCandidato.addEventListener('blur', validarCandidato);\r\n        ciudadCandidato.addEventListener('blur', validarCandidato);\r\n        hdvCandidato.addEventListener('change', validarCandidato, false);\r\n    }\r\n}\r\n\r\nfunction validarCandidato(e){\r\n    if(e.target.value.length > 0){\r\n        //Elimina los errores\r\n        const error = document.querySelector('.alerta__error');\r\n        if(error){\r\n            error.remove();\r\n        }\r\n       \r\n    } else {\r\n        //console.log('No hay nada');\r\n        mostrarError('Todos los campos son obligatorios');\r\n    }\r\n\r\n    if(e.target.type === 'email'){\r\n        if(er.test(e.target.value) === false){\r\n            mostrarError('Email no valido');\r\n        } \r\n    }\r\n\r\n    if(e.target.type === 'tel'){\r\n        if(num.test(e.target.value) === false || e.target.value.length < 9){\r\n            mostrarError('Teléfono no valido');\r\n        } \r\n    }\r\n\r\n    if(e.target.type === 'number'){\r\n        if(num.test(e.target.value) === false || e.target.value < 18 || e.target.value > 99){\r\n            mostrarError('Edad no válida');\r\n        } \r\n    }\r\n\r\n    if(er.test(emailCandidato.value) && identificacion.value !== '' && nombreCandidato.value !== '' && apellidoCandidato.value !== '' && edadCandidato.value !== '' && ciudadCandidato.value !== '' && telefonoCandidato.value !== '' && hdvCandidato.files.length > 0){\r\n        btnPostular.disabled = false;\r\n        btnPostular.classList.remove('btn-disabled');\r\n        console.log('se puede enviar');\r\n        llenarCandidato();\r\n    }\r\n}\r\n\r\nfunction mostrarError(mensaje){\r\n    const mensajeError = document.createElement('p');\r\n    mensajeError.textContent = mensaje;\r\n    mensajeError.classList.add('alerta', 'alerta__error');\r\n\r\n    const errores = document.querySelectorAll('.alerta__error');\r\n    if(errores.length === 0){\r\n        formPostulacion.insertBefore(mensajeError, fieldset);\r\n    }    \r\n}\r\n\r\nfunction llenarCandidato(){\r\n        candidato.identificacion = identificacion.value;\r\n        candidato.nombre = nombreCandidato.value;\r\n        candidato.apellido = apellidoCandidato.value;\r\n        candidato.edad = edadCandidato.value;\r\n        candidato.telefono = telefonoCandidato.value;\r\n        candidato.email = emailCandidato.value;\r\n        candidato.ciudad = ciudadCandidato.value;\r\n        candidato.hdv = hdvCandidato.files[0];\r\n    \r\n    btnPostular.onclick= function(e){\r\n        e.preventDefault();\r\n        //Enviar el candidato a la BD\r\n        enviarCandidato();\r\n    }\r\n}\r\n\r\nasync function enviarCandidato(){\r\n    const {identificacion, nombre, apellido, edad, telefono, email, ciudad, hdv, idOferta} = candidato;\r\n\r\n    const datos = new FormData();\r\n    datos.append('identificacion', identificacion);\r\n    datos.append('nombre', nombre);\r\n    datos.append('apellido', apellido);\r\n    datos.append('edad', edad);\r\n    datos.append('telefono', telefono);\r\n    datos.append('email', email);\r\n    datos.append('ciudad', ciudad);\r\n    datos.append('hdv', hdv);\r\n    datos.append('idOferta', idOferta);\r\n\r\n    try{\r\n        const url = 'http://localhost:3000/api/candidatos';\r\n\r\n        const response = await fetch(url, {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n\r\n        const resultado = await response.text();\r\n        if(resultado.resultado){\r\n            Swal.fire({\r\n                title: 'Postulación Enviado',\r\n                text: 'Pronto te contactaremos',\r\n                icon: 'success'\r\n            }).then( () => {\r\n                window.location.reload();\r\n            })\r\n        };\r\n\r\n    } catch(error){\r\n        console.log(error);\r\n        Swal.fire({\r\n            title: 'Error',\r\n            text: 'Mensaje no enviado. Intenta de nuevo',\r\n            icon: 'error'\r\n        }).then( () => {\r\n            window.location.reload();\r\n        });   \r\n    }\r\n}\r\n\r\n"]}