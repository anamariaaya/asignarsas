{"version":3,"sources":["apiCiudades.js"],"names":["ciudad","id","nombre","activa","checkCiudad","document","querySelectorAll","leerCheckbox","forEach","check","addEventListener","e","guardarSeleccion","target","dataset","value","enviarSeleccion","async","infoCiudad","FormData","append","url","respuesta","fetch","method","body","json","resultado","Swal","fire","title","text","icon","then","window","location","reload","error","console","log"],"mappings":"AACA,MAAMA,OAAS,CACXC,GAAI,GACJC,OAAQ,GACRC,OAAQ,IAGNC,YAAcC,SAASC,iBAAiB,iBAM9C,SAASC,eACLH,YAAYI,QAAQC,IAChBA,EAAMC,iBAAiB,QAASC,IAC5BC,iBAAiBD,OAK7B,SAASC,iBAAiBD,GAClBX,OAAOC,GAAKU,EAAEE,OAAOZ,GACrBD,OAAOE,OAASS,EAAEE,OAAOC,QAAQZ,OACX,MAAnBS,EAAEE,OAAOE,MACRf,OAAOG,OAAS,IAEhBH,OAAOG,OAAS,IAGxBa,kBAGJC,eAAeD,kBACX,MAAMf,GAAEA,EAAEC,OAAEA,EAAMC,OAAEA,GAAWH,OAEzBkB,EAAa,IAAIC,SACvBD,EAAWE,OAAO,KAAMnB,GACxBiB,EAAWE,OAAO,SAAUlB,GAC5BgB,EAAWE,OAAO,SAAUjB,GAE5B,IACI,MAAMkB,EAAM,mCAENC,QAAkBC,MAAMF,EAAK,CAC/BG,OAAQ,OACRC,KAAMP,WAGcI,EAAUI,QACrBC,WACTC,KAAKC,KAAK,CACNC,MAAO,qBACPC,KAAM,gCACNC,KAAM,YACPC,KAAM,KACLC,OAAOC,SAASC,WAG1B,MAAMC,GACJC,QAAQC,IAAIF,GACZT,KAAKC,KAAK,CACNC,MAAO,QACPC,KAAM,uCACNC,KAAM,WAvDlB3B,SAASK,iBAAiB,mBAAoB,KAC1CH","file":"apiCiudades.js","sourcesContent":["//Variables\r\nconst ciudad = {\r\n    id: '',\r\n    nombre: '',\r\n    activa: ''\r\n}\r\n\r\nconst checkCiudad = document.querySelectorAll('.check-ciudad');\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    leerCheckbox();\r\n});\r\n\r\nfunction leerCheckbox() {\r\n    checkCiudad.forEach(check => {\r\n        check.addEventListener('click', e => {\r\n            guardarSeleccion(e);\r\n        });\r\n    });\r\n}\r\n\r\nfunction guardarSeleccion(e) {\r\n        ciudad.id = e.target.id;\r\n        ciudad.nombre = e.target.dataset.nombre;\r\n        if(e.target.value === '1'){\r\n            ciudad.activa = '0';\r\n        } else {\r\n            ciudad.activa = '1';\r\n        }\r\n\r\n    enviarSeleccion();\r\n}\r\n\r\nasync function enviarSeleccion() {\r\n    const { id, nombre, activa } = ciudad;\r\n\r\n    const infoCiudad = new FormData();\r\n    infoCiudad.append('id', id);\r\n    infoCiudad.append('nombre', nombre);\r\n    infoCiudad.append('activa', activa);\r\n\r\n    try{\r\n        const url = 'http://localhost:3000/api/ciudad';\r\n\r\n        const respuesta = await fetch(url, {\r\n            method: 'POST',\r\n            body: infoCiudad\r\n        });\r\n\r\n        const resultado = await respuesta.json();\r\n        if(resultado.resultado){\r\n            Swal.fire({\r\n                title: 'Ciudad Actualizada',\r\n                text: 'Ya puedes revisar tus cambios',\r\n                icon: 'success'\r\n            }).then( () => {\r\n                window.location.reload();\r\n            })\r\n        };\r\n    } catch(error) {\r\n        console.log(error);\r\n        Swal.fire({\r\n            title: 'Error',\r\n            text: 'Mensaje no enviado. Intenta de nuevo',\r\n            icon: 'error'\r\n        });\r\n    }\r\n}"]}