const contacto={id:null,nombres:"",apellidos:"",ciudad:"",correo:"",celular:"",mensaje:"",estado:"0",fecha:""},btnEnviar=document.querySelector("#enviar"),formulario=document.querySelector("#enviar-mensaje"),fieldset=document.querySelector("#fieldset"),nombres=document.querySelector("#nombresInput"),apellidos=document.querySelector("#apellidosInput"),ciudad=document.querySelector("#ciudadInput"),correo=document.querySelector("#correoInput"),celular=document.querySelector("#celularInput"),mensaje=document.querySelector("#mensajeInput");function padTo2Digits(e){return e.toString().padStart(2,"0")}const fecha=new Date,mes=padTo2Digits(fecha.getMonth()+1),dia=padTo2Digits(fecha.getDate()),year=fecha.getFullYear(),hora=padTo2Digits(fecha.getHours()),minutos=padTo2Digits(fecha.getMinutes()),segundos=padTo2Digits(fecha.getSeconds()),fechaFormateada=`${year}-${mes}-${dia} ${hora}:${minutos}:${segundos}`;contacto.fecha=fechaFormateada;const er=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,num=/^[0-9]+$/;function eventListeners(){nombresInput.addEventListener("blur",validarFormulario),apellidosInput.addEventListener("blur",validarFormulario),ciudadInput.addEventListener("blur",validarFormulario),correoInput.addEventListener("blur",validarFormulario),celularInput.addEventListener("blur",validarFormulario),mensajeInput.addEventListener("input",validarFormulario)}function iniciarForm(){btnEnviar.disabled=!0,btnEnviar.classList.add("btn-disabled")}function validarFormulario(e){if(e.target.value.length>0){const e=document.querySelector(".alerta__error");e&&e.remove()}else mostrarError("Todos los campos son obligatorios");"email"===e.target.type&&!1===er.test(e.target.value)&&mostrarError("Email no valido"),"tel"===e.target.type&&(!1===num.test(e.target.value)||e.target.value.length<9)&&mostrarError("TelÃ©fono no valido"),er.test(correoInput.value)&&""!==nombresInput.value&&""!==apellidosInput.value&&""!==ciudadInput.value&&""!==celularInput.value&&""!==mensajeInput.value&&(btnEnviar.disabled=!1,btnEnviar.classList.remove("btn-disabled"),llenarMensaje())}function mostrarError(e){const a=document.createElement("p");a.textContent=e,a.classList.add("alerta","alerta__error");0===document.querySelectorAll(".alerta__error").length&&formulario.insertBefore(a,fieldset)}function llenarMensaje(){contacto.nombres=nombres.value,contacto.apellidos=apellidos.value,contacto.ciudad=ciudad.value,contacto.correo=correo.value,contacto.celular=celular.value,contacto.mensaje=mensaje.value,btnEnviar.onclick=function(e){e.preventDefault(),apiContacto()}}async function apiContacto(){const{nombres:e,apellidos:a,ciudad:t,correo:o,celular:r,mensaje:n,estado:l,fecha:i}=contacto,c=new FormData;c.append("nombres",e),c.append("apellidos",a),c.append("ciudad",t),c.append("correo",o),c.append("celular",r),c.append("mensaje",n),c.append("estado",l),c.append("fecha",i);try{const e="/api/mensaje",a=await fetch(e,{method:"POST",body:c});(await a.json()).resultado&&Swal.fire({title:"Mensaje Enviado",text:"Gracias por escribirnos",icon:"success"}).then(()=>{window.location.reload()})}catch(e){Swal.fire({title:"Error",text:"Mensaje no enviado. Intenta de nuevo",icon:"error"}).then(()=>{window.location.reload()})}}document.addEventListener("DOMContentLoaded",()=>{iniciarForm(),eventListeners()});
//# sourceMappingURL=apiContacto.js.map
